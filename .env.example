# MemoGarden API Environment Configuration
# ========================================
# Copy this file to .env and customize for your environment.

#-------------------------------------------------------------------------------
# Database Configuration (RFC-004 v2)
#-------------------------------------------------------------------------------

# Priority: Layer-specific override → shared data dir → current directory
# See: https://github.com/memogarden/memogarden/blob/main/plan/rfc-004-package-deployment.md

# Layer-specific database paths (highest priority)
# Set these to override all other path resolution
# MEMOGARDEN_SOIL_DB=/var/lib/memogarden/soil.db
# MEMOGARDEN_CORE_DB=/var/lib/memogarden/core.db

# Shared data directory (fallback if layer-specific paths not set)
# Both databases will be created in this directory
# MEMOGARDEN_DATA_DIR=/var/lib/memogarden

# Legacy database paths (for backward compatibility, will be migrated to RFC-004)
# DO NOT use these in new deployments
DATABASE_PATH=./data/core.db
SOIL_DATABASE_PATH=./data/soil.db

#-------------------------------------------------------------------------------
# API Configuration
#-------------------------------------------------------------------------------

API_V1_PREFIX=/api/v1
FLASK_PORT=5000

#-------------------------------------------------------------------------------
# CORS Configuration
#-------------------------------------------------------------------------------

# CORS origins (JSON array format)
# For Tailscale-only deployment, ["*"] is acceptable
# For public deployment, restrict to specific origins: ["https://example.com"]
CORS_ORIGINS=["*"]

#-------------------------------------------------------------------------------
# Application Configuration
#-------------------------------------------------------------------------------

# Default currency for transactions
DEFAULT_CURRENCY=SGD

#-------------------------------------------------------------------------------
# Authentication Configuration
#-------------------------------------------------------------------------------

# JWT secret key for token signing
# IMPORTANT: Generate a secure random key in production!
# Use: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=change-me-in-production-use-env-var

# JWT token expiration time
JWT_EXPIRY_DAYS=30

#-------------------------------------------------------------------------------
# Development/Testing Configuration
#-------------------------------------------------------------------------------

# Bypass localhost-only checks for admin registration
# For headless deployments (RPi, servers): set to "true" to allow remote access
# For local development: set to "false" to require localhost access
BYPASS_LOCALHOST_CHECK=false

#-------------------------------------------------------------------------------
# Production Server Configuration (gunicorn)
#-------------------------------------------------------------------------------

# Worker processes (2-4 for Raspberry Pi, set to CPU count)
# MEMOGARDEN_WORKERS=2

# Worker timeout in seconds
# MEMOGARDEN_TIMEOUT=30

# Bind address (127.0.0.1 for localhost, 0.0.0.0 for all interfaces)
# MEMOGARDEN_BIND=127.0.0.1:5000

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# MEMOGARDEN_LOG_LEVEL=INFO
